<% layout('layouts/boilerplate') %>

<div id="meme-container" class="d-flex flex-column">
    <% for (let meme of memes) { %>
    <div class="container mt-3">
        <%- include('../partials/meme', {meme: meme}) %>
    </div>
    <% } %>
</div>



<% if (typeof page === 'string' || typeof page === 'number') {%>

<div class="container">
    <nav aria-label="pages">
        <ul class="pagination justify-content-center">
            <li class="page-item <% if (page < 2){%>disabled<% } %>">
                <a class="page-link" href="/memes/<%if (typeof category === 'string') {%><%=category.toLowerCase()%>/<% } %><%=parseInt(page)-1%>" aria-label="Previous">&laquo;</a>
            </li>
            <li class="page-item <% if (page < 2){%>active<%}%>">
                <a class="page-link" href="/memes/<%if (typeof category === 'string') {%><%=category.toLowerCase()%>/<% } %><% if (page <= 2){%>1<%} else if  (parseInt(page) === pageCount) {%><%=pageCount - 2%><%} else {%><%=page-1%><%}%>"><% if (page <= 2){%>1<%}else if (parseInt(page) === pageCount) {%><%=pageCount - 2%><%} else {%> <%=page-1%>  <%}%></a>
                </li>

                <%if (pageCount > 1) { %> 

            <li class=" page-item <% if ((page >= 2 && page < pageCount) || (parseInt(page) === 2 && pageCount === 2)){%>active<%}%>">
                <a class="page-link" href="/memes/<%if (typeof category === 'string') {%><%=category.toLowerCase()%>/<% } %><% if (page <= 2){%>2<%} else if (parseInt(page) === pageCount) {%><%=pageCount - 1%><%} else {%><%=page%><%}%>"><% if (page <= 2){%>2<%}else if (parseInt(page) === pageCount) {%><%=pageCount - 1%><%} else {%> <%=page%><%}%>
                </a>
            <li>

            <%} if (pageCount > 2) { %> <li class="page-item <% if (parseInt(page) === pageCount){%>active<%}%>">
                <a class="page-link" 
                href="/memes/<%if (typeof category === 'string') {%><%=category.toLowerCase()%>/<% } %><% if (page < 2){%>3<%} else if (parseInt(page) === pageCount) {%><%=pageCount%><%} else {%><%=parseInt(page)+1%><%}%>">
                <% if (page < 2){%>3<%} else if (parseInt(page) === pageCount) {%><%=pageCount%><%} else {%> <%=parseInt(page)+1%> <%}%>
                </a>
            </li>
                <% } %> 

            <li class=" page-item <% if (parseInt(page) === pageCount || pageCount === 0){%>disabled<% } %>">
                <a class="page-link" href="/memes/<%if (typeof category === 'string') {%><%=category.toLowerCase()%>/<% } %><%=parseInt(page)+1%>" aria-label="Next">&raquo;</a>
            </li>
        </ul>
    </nav>
</div>

<% } %>