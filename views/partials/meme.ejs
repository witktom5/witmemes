<div class="spinner-border meme-spinner m-auto d-block" id="spinner-<%=meme._id%>" role="status"></div>

<div class="card mb-3 bg-card bg-gradient shadow border-0 px-0 meme-loading" id="<%=meme._id%>">
    <div class="card-body d-flex align-items-center">
        <a href="/meme/<%=meme._id%>" class="text-decoration-none">
            <h5 class="card-title py-1 px-0 mb-0 text-light text-break"><%= meme.title %></h5>
        </a>
        <span class="fs-6 fw-light text-muted ms-auto ps-4 align-self-start text-end">by <%=meme.author.username %> </span>
    </div>
    <a href="/meme/<%=meme._id%>"><img src="<%=meme.image.displayImg %>" data-id="<%=meme._id%>" class="card-img-top rounded-0" alt="meme"></a>
    <div class="card-footer d-flex align-items-center bg-card bg-gradient py-2 border-0">

        <div class="card flex-row p-1 align-items-center me-2 bg-light">
            <form class="form-vote" data-id="<%=meme._id%>" data-vote="upvote">
                <button type="submit" id="btn-upvote-<%=meme._id%>" value="<%if(currentUser){%><%=currentUser._id%><%}%>" class="py-1 btn <% if (currentUser && meme.upvotedBy.includes(currentUser._id)) { %>
                btn-success
            <% } else { %>
                btn-secondary
                <% } %> " <%if(!currentUser){%>disabled<%} %>><i class="bi bi-arrow-up text-light"></i></button>
            </form>
            <span class="fs-4 px-3" id="upvoteCounter-<%=meme._id%>"><%=meme.upvotedBy.length%> </span>
        </div>

        <div class="card flex-row p-1 align-items-center me-2">
            <form class="form-vote" data-id="<%=meme._id%>" data-vote="downvote">
                <button type="submit" id="btn-downvote-<%=meme._id%>" value="<%if(currentUser){%><%=currentUser._id%><%}%>" class="py-1 btn <% if (currentUser && meme.downvotedBy.includes(currentUser._id)) { %>
                btn-danger
            <% } else { %>
                btn-secondary
                <% } %> " <%if(!currentUser){%>disabled<%} %>><i class="bi bi-arrow-down text-light"></i></button>
            </form>
            <span class="fs-4 px-3" id="downvoteCounter-<%=meme._id%>"><%=meme.downvotedBy.length%> </span>
        </div>

        <div class="card flex-row p-1 align-items-center">
            <a class="btn btn-secondary py-1" href="/meme/<%=meme._id%>/#comments"><i class="bi bi-chat-fill"></i></a>
            <span class="fs-4 px-3 py-0"><%=meme.comments.length%> </span>
        </div>

        <span class="fs-6 fw-light text-muted text-end ms-auto me-2"><%=meme.date %> </span>
    </div>
</div>